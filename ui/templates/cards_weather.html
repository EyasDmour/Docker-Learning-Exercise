{% extends "base.html" %}
{% block content %}
<h2 style="margin:4px 0 12px">Weather — Cards</h2>
<div class="toolbar">
  <div class="muted">Latest {{ rows|length }} weather records</div>
  <div>
    <a class="btn btn-sm btn-outline-primary" href="/table/public.weather">Table</a>
    <a class="btn btn-sm btn-outline-primary" href="/">Back</a>
  </div>
</div>
<div id="cards" class="grid cols-3">
  {% for r in rows %}
  <div class="rowcard" data-pk="{{ r[pk_cols[0]] if pk_cols and pk_cols[0] in r else '' }}">
    <div style="display:flex;align-items:center;justify-content:space-between">
      <div style="font-weight:600">{{ r.get('city') or r.get('location') or 'Weather' }}</div>
      {% if r.get('temperature') %}<span class="pill">{{ r['temperature'] }}°</span>{% endif %}
    </div>
    <div class="kv" style="margin-top:8px">
      {% for c in columns %}
      {% if c not in ['city','location','temperature'] %}
      <div>{{ c }}</div>
      <div>{{ r[c] }}</div>
      {% endif %}
      {% endfor %}
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
